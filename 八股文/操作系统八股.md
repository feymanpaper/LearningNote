###  什么是线程安全?
线程共享的资源：包括进程的代码区，数据区(全局变量和静态变量), 堆等..
线程独占的资源:
1. 线程运行的本质就是函数的执行，函数运行时的信息保存在栈帧中，包括函数的返回值、使用的局部变量、寄存器信息等，因此每个进程都有自己独立的、私有的栈区
2. 程序计数器、函数运行使用的寄存器组的值也是线程私有的
3. 每个线程用户独立的线程ID、独立的调度优先级、错误返回码
如何保证线程安全？
隔离: 1.局部变量私有化 2.threadLocal
3.final 只读不改 4.互斥锁 5.乐观锁自旋CAS+for